{% extends "base/base.html" %}{% load staticfiles %}
{% block title %}Willkommen{% endblock %}
{% block premain %}
<template id="SlaveTemplate">
	<div id="Slave">
	<li class="list-group-item" id="SlaveListItem">
		<img src={% static "frontend/server.jpg" %}> <br>
		<h1 id="ip"></h1>
	</li>
	</div>
</template>		
{% endblock %}
{% block content %}
<div class="jumbotron">
	<div class="container">
		<button type="button" id="registerButton">Slave hinzuf√ºgen</button>
	</div>
</div>
<ul class="list-group" id="slaveList">
</ul>

<!-- Modal -->
<div class="modal fade" id="registerSlaveModal" role="dialog">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">&times;</button>
			</div>
			<div class="modal-body">
					<div class="form" id="ipform">
							Ip-Adresse:
							<input type="text" name="ip">
					</div>
			</div>
			<div class="modal-footer">
				<button id="cancelRegisterSlave" type="button" class="btn btn-default" data-dismiss="modal">Abbrechen</button>
				<button id="saveSlave" type="button" class="btn btn-default" data-dismiss="modal">Speichern</button>
			</div>
		</div>
	</div>
</div>
{% endblock %}
{% block script %}
<script>
	$(document).ready(function(){
		$("#registerButton").click(function(){
			$("#registerSlaveModal").modal();
		});

		$("#cancelRegisterSlave").click(function(){
			$("#registerSlaveModal").modal();
		});

		$("#saveSlave").click(function(){
			//read input from form	
			let address = $("#ipform").children()[0].value; 

			//generate Slave entry from SlaveTemplate and address	
			var slave_template = document.getElementById("SlaveTemplate").content.cloneNode(true);
			slave_template.querySelector("#ip").appendChild(document.createTextNode(address));

			//append Slave to list	
			$("#slaveList").append(slave_template);
		});
	})
</script>
{% endblock %}

