
{% extends "base/base.html" %}
{% load staticfiles %}
{% load components %}
{% block title %} Scripts {% endblock %}
{% block premain %}
<div id="deleteWarning" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Deletion Warning!</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
            </div>
            <div class="modal-footer">
                <button type='button' class='btn btn-info' id='deleteScriptModalButton'>OK</button>
                <button type='reset' class='btn btn-danger' data-dismiss='modal'>Cancel</button>
            </div>
        </div>
    </div>
</div>

{% endblock %}
{% block content %}
<div class="ml-4 mr-4 max-height">
    <div class="col col-xs-12 col-sm-12 col-md-3 col-xl-2 col-lg-3">
        <div class="row-2 form-group">
            <label class="client-header font-weight-bold">
                SCRIPTS
                <button class="btn inline-add-button script-action-add">
                    <i class="mdi mdi-plus font-weight-bold"></i>
                </button>
            </label>
        </div>

        <div class="row-2">
            <ul class="nav flex-column col" id="scriptTabList" role="tablist">
                <li class="nav-item" style="display: none;">
                    <a class="nav-link font-weight-bold script-tab-link" id="scriptTabNew" data-toggle="tab" href="#scriptTabContentNew" role="tab">
                    </a>
                </li>

                {% for script in scripts %}
                    <li class="nav-item mb-2 pt-2 pb-2 pr-4 pl-4 fsim-box" data-state="unkown">
                        <a class="nav-link font-weight-bold script-tab-link" id="scriptTab{{ script.id }}" data-toggle="tab" href="#scriptTabContent{{ script.id }}" role="tab">
                            <i class="mdi mdi-description"></i>
                            {{ script.name }}
                        </a>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </div>

    <div class="container-fluid tab-content col col-xs-12 col-sm-12 col-md-8 col-lg-8 col-xl-9 max-height">
        <div class="tab-pane fade show max-height" role="tabpanel"  id="scriptTabContentNew">
            <div class="row mb-4">
                <div class="btn-toolbar col d-flex justify-content-end" role="toolbar">
                    <div class="btn-group mr-2" role="group">
                        <button type="button" class="btn btn-outline-dark program-action-add-save font-weight-light script-action-add-save" data-editor-id="new_script">
                            <i class="mdi mdi-check"></i> SAVE
                        </button>
                    </div>
                </div>
            </div>

            <div class="row" id="jsoneditor_new_script" style="height: 90%;">
                <script>
                    newScript('new_script');
                </script>
            </div>
        </div>

        {% for script in scripts %}
            <div class="tab-pane fade show" id="scriptTabContent{{ script.id }}" role="tabpanel">
                {% script_entry script %}
            </div>
        {% empty %}
            <div class="tab-pane fade show active">
                <span class="background-text-large">No scripts created</span>
            </div>
        {% endfor %}
    </div>

</div>
{% endblock %}

{% block script %}
    <script src="{% static 'node/jsoneditor/dist/jsoneditor.min.js' %}"></script>
    <script src="{% static 'frontend/scripts.js'%}"></script>
{% endblock %}